setcps (120/80/2)

p "rave" $ stack [
  jux ((# speed sine) . rev) $ n "[0 1] [0 1]*2 0 1" # s "sn" # gain 1,
  n "[<7 8> 7]*2 [0 1]*2 [<7 8> 7]? [1 1]?" # s "feel" # gain 1,
  n "1 1 1 1 1 2" # s "superfm" # gain 1 # lpf "1200 800",
  every 3 ((fast 2) . rev) $ every 2 (rev) $ scale "chinese" "1..4" # s "supergong" # gain 1 # room 0.8 # size 1
]

p "bittrap" $ stack [
   n "0 0 7 -1 1 0" # s "superfm" # pan sine # gain 1 # room 0.9 # size 0.5,
   every 2 (# s "feel") $ n "[0 1]? [1 1]? [<7 8> <1 2>]? [<7 8> <3 4>]" # s "sn" # gain 0,
   every 4 (# n "1 0") $ n "0 1" # s "superpiano" # octave 7 # lpf "1200 700" # gain 1,
   every 2 (fast 2) $ every 3 (rev) $ scale "minorPent" "1..8" # s "supergong" # gain 1
] # gain 1

p "ravetrap" $ stack [
   n "0 0 0 0 1 0" # s "superfm" # pan sine # gain 0.8 # room 0.8 # size 0.7,
   every 2 (# lpf "1200") $ scale "indian" "1..6" # s "supergong" # gain 0.6 ,
   n "[0 <8 7>]*2 [<1 7> 1] [<7 8> 1]*2" # s "feel" # gain 1.2 # speed (tri + 0.4),
   every 2 (slow 2) $ every 4 (# n "1 0") $ n "0 0 1 1 0 1" # s "superpiano" # octave 5 # room 0.8 # size 0.2 # gain 0.9
]


p "main beat" $ every 2 (# speed 1) $ fast 1 $ n "6 <1 0> [0 0] [3 <1 4>]" # sound "feel" # speed 2 # gain 1

p "main beat" $ silence

p "great beat" $ n "[<8 7> 2] [0 1] [2 <1 2>] [1 <1 0>]" # s "feel" # speed (saw + 3) # gain 1

p "great beat" $ silence

p "rave" $ fast 1 $ n "[<1 4> 0] [1 5] [1 2] 0" # s "feel" # gain 1

p "rave" $ silence

p "bass1" $ every 2 (# speed 4) $ stack [
  n "[0 2] [2 3] [2 1] [0 1]" # s "bass3" # speed (sine + 3) # pan (sine)
] # gain 1

p "bass1" $ silence


p "melody main" $ stack [
  whenmod 3 1 (# scale "chinese" "1 .. 4") $ s "superfm*8" # scale "chinese" "4 .. 2" # attack 0.1
] # gain 1.6 # room (slow 3 $ range 0 0.75 saw) # voice 1 # pan (sine)

p "melody main" $ silence
